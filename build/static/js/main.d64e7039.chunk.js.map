{"version":3,"sources":["phone.js","App.js","index.js"],"names":["baseUrl","axios","get","newPerson","post","Button","handleClick","text","onClick","App","useEffect","then","response","console","log","data","setPersons","phoneService","useState","persons","newName","setNewName","phoneNumbers","setPhoneNumbers","showAll","setShowAll","errorMessage","setErrorMessage","noteErrorMessage","setNoteErrorMessage","namesToShow","filter","person","name","toLowerCase","includes","Notification","message","className","Note","value","onChange","event","target","onSubmit","preventDefault","find","window","confirm","nameObject","id","number","put","catch","error","setTimeout","concat","type","map","delete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d64e7039.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = 'http://localhost:3001/persons'\n\nconst getAll= () => {\n    return axios.get(baseUrl)\n}\n\nconst create = newPerson => {\n    return axios.post(baseUrl, newPerson)\n}\n\nexport default {\n    getAll: getAll,\n    create: create\n}","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport phoneService from './phone'\nimport './index.css'\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst Button = ({handleClick, text}) => (\n  <button onClick={handleClick}>\n    {text}\n  </button>\n)\nconst App = () => {\n  \n  useEffect(() => {\n    axios.get('http://localhost:3001/persons')\n    .then(response => {\n    console.log(response.data)\n    setPersons(response.data)\n    })\n   \n  }, [])\n\n  useEffect(() => {\n    phoneService\n    .getAll()\n    .then(response => {\n      setPersons(response.data)\n    })\n  }, [])\n  const [persons, setPersons] = useState([])\n\n  const [newName, setNewName] = useState('')\n\n  const [phoneNumbers, setPhoneNumbers] = useState('')\n\n  const [showAll, setShowAll] = useState('')\n\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  const [noteErrorMessage, setNoteErrorMessage] = useState(null)\n\n\n  const namesToShow = \n    persons.filter(person => person.name.toLowerCase().includes(showAll.toLowerCase()))\n    \n  const addName = (event) => {\n    event.preventDefault()\n    if (persons.find(person => person.name === newName)) {\n        let ok = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n        if (ok === true) {\n          const nameObject = {\n            name: newName,\n            id: newName,\n            number: phoneNumbers\n          }\n       \n          axios.put('http://localhost:3001/persons/'+(newName), nameObject)\n          .then(response => {\n          console.log(response.data)\n          axios.get('http://localhost:3001/persons')\n          .then(response => {\n          console.log(response.data)\n          setPersons(response.data)\n          })\n          })\n          .catch(error => {\n            setNoteErrorMessage(\n              `${newName} has already been removed from server`\n            )\n            setTimeout(() => {\n              setNoteErrorMessage(null)\n            }, 5000)\n          })\n        }\n    }\n    else {\n      const nameObject = {\n        name: newName,\n        id: newName,\n        number: phoneNumbers\n      }\n      \n      setPersons(persons.concat(nameObject))\n      setPhoneNumbers(persons.concat(nameObject))\n      setNewName('')\n      setPhoneNumbers('')\n    \n    phoneService\n      .create(nameObject)\n      .then(response => {\n        setPersons(persons.concat(response.data))\n        setNewName('')\n        setErrorMessage(\n          `${newName} added to server`\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }\n  }\n  const deletePersonName = (id, name) => {\n    let x = window.confirm(`Delete ${name} ?`)\n    if (x === true) {\n      axios.delete('http://localhost:3001/persons/'+(id))\n      .then(response => {\n      console.log(response.data)\n      axios.get('http://localhost:3001/persons')\n      .then(response => {\n      console.log(response.data)\n      setPersons(response.data)\n      })\n      })\n\n    }\n    \n  }\n\n  const Notification = ({message}) => {\n    if (message === null) {\n      return null\n    }\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\n  const Note = ({message}) => {\n    if (message === null) {\n      return null\n    }\n    return (\n      <div className=\"warning\">\n        {message}\n      </div>\n    )\n  }\n\n  const handleNameAdd = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberAdd = (event) => {\n    setPhoneNumbers(event.target.value)\n  }\n  const handleFilter = (event) => {\n    setShowAll(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <Note message={noteErrorMessage} />\n        <div>\n          filter shown with <input\n          value={showAll}\n          onChange={handleFilter} />\n          \n        </div>\n      <h2>add a new</h2>\n      <form onSubmit={addName}>\n        <div>\n          name: <input \n          value={newName} \n          onChange={handleNameAdd}\n            />\n        </div>\n        <div>\n          number: <input\n          value={phoneNumbers}\n          onChange={handleNumberAdd}\n          /> \n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n   \n        <ul>\n          {namesToShow.map(person => <li key={person.id}>{person.name} {person.number} <Button handleClick={() => {deletePersonName(person.id, person.name)}}  text=\"delete\"/></li>)}\n          \n        </ul>\n      \n      \n      \n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}